@using Fluxor
@using DeusVultClicker.Client.Shared.Store
@using DeusVultClicker.Client.Shared.Store.Actions
@using DeusVultClicker.Client.Upgrades.Store.Selector
@inherits Fluxor.Blazor.Web.Components.FluxorComponent

<h3>Faith upgrades</h3>
<ul>
    @foreach (var upgrade in AvailableUpgradesSelector.SelectAvailableUpgrades())
    {
        <li>
            <AdvancementCard Title="@upgrade.Title"
                             Description="@upgrade.Description"
                             EffectDescription="@upgrade.EffectDescription"
                             FlavorText="@upgrade.FlavorText"
                             Cost="@($"{upgrade.Cost} Faith")"
                             Disabled="@(upgrade.Cost > AppState.Value.Faith)"
                             OnBuy="() => Dispatcher.Dispatch(new UnlockUpgradeAction(upgrade))" />
        </li>
    }
</ul>

@code {
    [Inject]
    private AvailableUpgradesSelector AvailableUpgradesSelector { get; set; }
    [Inject]
    private IState<AppState> AppState { get; set; }
    [Inject]
    private IDispatcher Dispatcher { get; set; }
}
